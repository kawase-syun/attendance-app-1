# 出退勤打刻アプリ

研修課題5：スマートフォンからワンタップで出退勤を打刻し、管理者のLINEグループに自動通知するアプリ

## 機能

- 📱 出勤打刻（LINE通知 + スプレッドシート記録）
- 🏠 退勤打刻（勤務時間自動計算 + LINE通知）
- 🎉 課題完了報告（管理者に自動通知）
- 💾 PWA対応（スマホのホーム画面に追加可能）

## セットアップ手順

### 1. Googleスプレッドシートの作成

1. 新しいGoogleスプレッドシートを作成
2. 以下の3つのシートを作成：

#### シート1: 研修生マスタ
| 研修生ID | 氏名 | ステータス |
|---------|------|-----------|
| user01  | あなたの名前 | 進行中 |

#### シート2: 打刻記録
| 日付 | 研修生ID | 氏名 | 出勤時刻 | 退勤時刻 | 勤務時間 |
|------|---------|------|---------|---------|---------|

#### シート3: 課題完了記録
| 完了日時 | 研修生ID | 氏名 | アプリURL | 判定 |
|---------|---------|------|----------|------|

### 2. Google Apps Scriptの設定

1. スプレッドシートで「拡張機能」→「Apps Script」を開く
2. `Code.gs` の内容をコピー＆ペースト
3. スクリプトプロパティを設定：
   - `LINE_CHANNEL_ACCESS_TOKEN`: LINE Messaging APIのアクセストークン
   - `LINE_GROUP_ID`: LINEグループID
4. 「デプロイ」→「新しいデプロイ」→「ウェブアプリ」
   - 「次のユーザーとして実行」: 自分
   - 「アクセスできるユーザー」: 全員
5. デプロイ後、WebアプリのURLをコピー

### 3. フロントエンドの設定

1. `app.js` を開く
2. `CONFIG` オブジェクトの設定を更新：
   ```javascript
   const CONFIG = {
       GAS_URL: 'あなたのGASウェブアプリURL',
       USER_ID: 'user01',
       USER_NAME: 'あなたの名前'
   };
   ```

### 4. PWAアイコンの準備

以下のサイズのアイコン画像を用意してください：
- `icon-192.png` (192x192px)
- `icon-512.png` (512x512px)

アイコンは緑色の背景に時計やカレンダーのイラストを推奨します。

### 5. GitHub Pagesでホスティング

1. GitHubで新しいリポジトリを作成
2. プロジェクトファイルをpush
3. Settings → Pages → Branch: main → Save
4. 公開されたURLにアクセス

## 使い方

### スマホで使う（PWAインストール）

1. SafariまたはChromeでアプリのURLを開く
2. 「ホーム画面に追加」を選択
3. ホーム画面のアイコンからアプリを起動

### 出退勤打刻

1. 「出勤打刻」ボタンをタップ
2. 管理者のLINEグループに通知が送信されます
3. 退勤時は「退勤打刻」ボタンをタップ
4. 勤務時間が自動計算され、LINEに通知されます

### 課題完了報告

1. アプリの動作確認が完了したら
2. 「課題完了報告」ボタンをタップ
3. 管理者に通知が送信され、確認後に合格判定されます

## 技術スタック

- **フロントエンド**: HTML5, CSS3, JavaScript (ES6+)
- **バックエンド**: Google Apps Script
- **通知**: LINE Messaging API
- **データベース**: Google Spreadsheet
- **PWA**: Service Worker, Web App Manifest
- **ホスティング**: GitHub Pages

## トラブルシューティング

### GASのエラー確認方法
1. Apps Scriptエディタで「実行ログ」を確認
2. `Logger.log()` や `console.log()` で動作確認

### LINE通知が届かない
- アクセストークンが正しいか確認
- グループIDが正しいか確認
- GASのスクリプトプロパティに設定されているか確認

### PWAがインストールできない
- HTTPS接続であることを確認（GitHub Pagesは自動的にHTTPS）
- manifest.jsonが正しく読み込まれているか確認
- Service Workerが正しく登録されているか確認

## ライセンス

MIT License

## 作成者

研修生: あなたの名前 (user01)
